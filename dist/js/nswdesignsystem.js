!function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,s=!1,a=void 0;try{for(var o,r=t[Symbol.iterator]();!(i=(o=r.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){s=!0,a=t}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var o=function(){function t(n){e(this,t),this.triggerButton=n,this.originalButton=document.querySelector(".js-open-search"),this.targetElement=document.getElementById(this.triggerButton.getAttribute("aria-controls")),this.searchInput=this.targetElement.querySelector(".js-search-input"),this.pressed="true"===this.triggerButton.getAttribute("aria-expanded")}return i(t,[{key:"init",value:function(){this.controls()}},{key:"controls",value:function(){this.triggerButton.addEventListener("click",this.showHide.bind(this),!1)}},{key:"showHide",value:function(){this.pressed?(this.targetElement.hidden=!0,this.originalButton.hidden=!1,this.originalButton.focus()):(this.targetElement.hidden=!1,this.originalButton.hidden=!0,this.searchInput.focus())}}]),t}(),r=function(t,e){for(var n,i=[],s=0;s<e.length;s+=1)i.push([].slice.call(document.querySelectorAll("#".concat(t," ").concat(e[s]))));var a,o=(n=[]).concat.apply(n,i);return{all:a=o,first:a[0],last:a[a.length-1],length:a.length}},l=function(t,e){var n=document.activeElement,i=e;return 9===t.keyCode&&(1===i.length?t.preventDefault():t.shiftKey&&n===i.first?(i.last.focus(),t.preventDefault()):t.shiftKey||n!==i.last||(i.first.focus(),t.preventDefault()),!0)},c=function(t){return"".concat(void 0===t?"nsw":t,"-").concat(Math.random().toString(36).substr(2,16))},u=function(){function t(){var n,i,s=this;e(this,t),this.openNavButton=document.querySelector(".js-open-nav"),this.closeNavButtons=document.querySelectorAll(".js-close-nav"),this.openSubNavButtons=document.querySelectorAll(".js-open-sub-nav"),this.closeSubNavButtons=document.querySelectorAll(".js-close-sub-nav"),this.mainNavElement=document.getElementById("main-nav"),this.isMegaMenuElement=!!document.querySelector(".js-mega-menu"),this.transitionEvent=(n=document.createElement("fakeelement"),(i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"})[Object.keys(i).filter((function(t){return void 0!==n.style[t]}))[0]]),this.mobileToggleMainNavEvent=function(t){return s.mobileToggleMainNav(t)},this.mobileToggleSubNavEvent=function(){return s.closeSubNav()},this.mobileShowMainTransitionEndEvent=function(t){return s.mobileShowMainNav(t)},this.mobileHideMainTransitionEndEvent=function(t){return s.mobileHideMainNav(t)},this.showSubNavTransitionEndEvent=function(t){return s.showSubNav(t)},this.mobileTrapTabKeyEvent=function(t){return s.mobileMainNavTrapTabs(t)},this.mobileSubNavTrapTabKeyEvent=function(t){return s.trapkeyEventStuff(t)},this.desktopButtonClickEvent=function(t){return s.buttonClickDesktop(t)},this.desktopButtonKeydownEvent=function(t){return s.buttonKeydownDesktop(t)},this.checkFocusEvent=function(t){return s.checkIfContainsFocus(t)},this.escapeCloseEvent=function(t){return s.escapeClose(t)},this.openSubNavElements=[],this.breakpoint=window.matchMedia("(min-width: 62em)"),this.body=document.body}return i(t,[{key:"init",value:function(){var t=this;this.mainNavElement&&(this.setUpMobileControls(),this.responsiveCheck(this.breakpoint),this.breakpoint.addListener((function(e){return t.responsiveCheck(e)})))}},{key:"responsiveCheck",value:function(t){var e=[];t.matches?(e=[].slice.call(this.mainNavElement.querySelectorAll("ul > li")),this.body.classList.remove("main-nav-active")):e=[].slice.call(this.mainNavElement.querySelectorAll("li")),this.tearDownNavControls(),this.setUpNavControls(e)}},{key:"tearDownNavControls",value:function(){var t=this;this.isMegaMenuElement&&[].slice.call(this.mainNavElement.querySelectorAll("li")).forEach((function(e){var n=e.querySelector("[id^=sub-nav-]"),i=e.querySelector("a");n&&(i.removeAttribute("role"),i.removeAttribute("aria-expanded"),i.removeAttribute("aria-controls"),i.removeEventListener("click",t.desktopButtonClickEvent,!1),i.removeEventListener("keydown",t.desktopButtonKeydownEvent,!1))}))}},{key:"setUpMobileControls",value:function(){var t=this;this.openNavButton.addEventListener("click",this.mobileToggleMainNavEvent,!1),this.closeNavButtons.forEach((function(e){e.addEventListener("click",t.mobileToggleMainNavEvent,!1)})),this.closeSubNavButtons.forEach((function(e){e.addEventListener("click",t.mobileToggleSubNavEvent,!1)}))}},{key:"mobileMainNavTrapTabs",value:function(t){var e=r(this.mainNavElement.id,["> div button","> ul > li > a"]);l(t,e)}},{key:"setUpNavControls",value:function(t){var e=this;this.isMegaMenuElement&&t.forEach((function(t){var n=t.querySelector("[id^=sub-nav-]"),i=t.querySelector("a");n&&(i.setAttribute("role","button"),i.setAttribute("aria-expanded","false"),i.setAttribute("aria-controls",n.id),i.addEventListener("click",e.desktopButtonClickEvent,!1),i.addEventListener("keydown",e.desktopButtonKeydownEvent,!1),document.addEventListener("keydown",e.escapeCloseEvent,!1))}))}},{key:"mobileShowMainNav",value:function(t){"transform"!==!t.propertyName&&(r(this.mainNavElement.id,["> div button","> ul > li > a"]).all[1].focus(),this.mainNavElement.classList.add("active"),this.mainNavElement.classList.remove("activating"),this.mainNavElement.removeEventListener(this.transitionEvent,this.mobileShowMainTransitionEndEvent,!1),this.mainNavElement.addEventListener("keydown",this.mobileTrapTabKeyEvent,!1))}},{key:"mobileHideMainNav",value:function(t){if("transform"!==!t.propertyName){for(this.mainNavElement.classList.remove("active"),this.mainNavElement.classList.remove("closing");this.openSubNavElements.length>0;){var e=this.whichSubNavLatest().submenu;e.removeEventListener("keydown",this.mobileSubNavTrapTabKeyEvent,!1),e.classList.remove("active"),e.classList.remove("closing"),this.openSubNavElements.pop()}this.mainNavElement.removeEventListener(this.transitionEvent,this.mobileHideMainTransitionEndEvent,!1),this.mainNavElement.removeEventListener("keydown",this.mobileTrapTabKeyEvent,!1)}}},{key:"mobileToggleMainNav",value:function(t){"true"===t.currentTarget.getAttribute("aria-expanded")?(this.body.classList.remove("main-nav-active"),this.openNavButton.focus(),this.mainNavElement.classList.add("closing"),this.mainNavElement.addEventListener(this.transitionEvent,this.mobileHideMainTransitionEndEvent,!1)):(this.body.classList.add("main-nav-active"),this.mainNavElement.classList.add("activating"),this.mainNavElement.addEventListener(this.transitionEvent,this.mobileShowMainTransitionEndEvent,!1))}},{key:"buttonClickDesktop",value:function(t){this.saveElements(t),this.toggleSubNavDesktop(),t.preventDefault()}},{key:"buttonKeydownDesktop",value:function(t){" "!==t.key&&"Enter"!==t.key&&"Spacebar"!==t.key||(this.saveElements(t),this.toggleSubNavDesktop(),t.preventDefault())}},{key:"escapeClose",value:function(t){if("Escape"===t.key){var e=this.whichSubNavLatest().link;"true"===e.getAttribute("aria-expanded")&&(this.toggleSubNavDesktop(!0),t.preventDefault(),e.focus())}}},{key:"saveElements",value:function(t){var e=t.currentTarget,n={submenu:document.getElementById(e.getAttribute("aria-controls")),link:e,linkParent:e.parentNode};this.openSubNavElements.push(n)}},{key:"showSubNav",value:function(t){var e=t.propertyName,n=this.whichSubNavLatest().submenu;"transform"!==!e&&(r(n.id,["> div button","> .nsw-main-nav__title a","> ul > li > a"]).all[2].focus(),n.removeEventListener(this.transitionEvent,this.showSubNavTransitionEndEvent,!1))}},{key:"closeSubNav",value:function(){var t=this.whichSubNavLatest(),e=t.submenu,n=t.link;this.breakpoint.matches?(n.setAttribute("aria-expanded",!1),n.classList.remove("active"),this.mainNavElement.removeEventListener("focus",this.checkFocusEvent,!0),this.mainNavElement.removeEventListener("click",this.checkFocusEvent,!0)):(n.focus(),e.removeEventListener("keydown",this.mobileSubNavTrapTabKeyEvent,!1)),e.classList.remove("active"),this.openSubNavElements.pop()}},{key:"openSubNav",value:function(){var t=this.whichSubNavLatest(),e=t.submenu,n=t.link;this.breakpoint.matches?(n.setAttribute("aria-expanded",!0),n.classList.add("active"),this.mainNavElement.addEventListener("focus",this.checkFocusEvent,!0),this.mainNavElement.addEventListener("click",this.checkFocusEvent,!0)):(e.addEventListener("keydown",this.mobileSubNavTrapTabKeyEvent,!1),e.addEventListener(this.transitionEvent,this.showSubNavTransitionEndEvent,!1)),e.classList.add("active")}},{key:"toggleSubNavDesktop",value:function(){"true"===this.whichSubNavLatest().link.getAttribute("aria-expanded")?this.closeSubNav():this.openSubNav()}},{key:"checkIfContainsFocus",value:function(t){var e=this.whichSubNavLatest().linkParent.contains(t.target),n=t.target.getAttribute("role");!e&&n&&this.toggleSubNavDesktop()}},{key:"whichSubNavLatest",value:function(){var t=this.openSubNavElements.length-1;return this.openSubNavElements[t]}},{key:"trapkeyEventStuff",value:function(t){var e=this.whichSubNavLatest().submenu,n=r(e.id,["> div button","> ul > li > a"]);l(t,n)}}]),t}(),h=function(){function t(n){var i=this;e(this,t);var a=s(Array.from(n.querySelectorAll(".nsw-accordion__toggle button")),2),o=a[0],r=a[1];this.accordionHeadingClass=".nsw-accordion__title",this.accordion=n,this.headings=n.querySelectorAll(this.accordionHeadingClass),this.expandAllBtn=o,this.collapseAllBtn=r,this.buttons=[],this.content=[],this.toggleEvent=function(t){return i.toggle(t)},this.expandAllEvent=function(t){return i.expandAll(t)},this.collapseAllEvent=function(t){return i.collapseAll(t)}}return i(t,[{key:"init",value:function(){this.setUpDom(),this.controls()}},{key:"setUpDom",value:function(){var t=this;this.accordion.classList.add("ready"),this.collapseAllBtn&&(this.collapseAllBtn.disabled=!0),this.headings.forEach((function(e){var n,i,s,a,o=e,r=e.nextElementSibling,l=(n=e.textContent,i=document.createDocumentFragment(),s=document.createElement("button"),a=c("accordion"),s.textContent=n,s.setAttribute("type","button"),s.setAttribute("aria-expanded","false"),s.setAttribute("aria-controls",a),s.classList.add("nsw-accordion__button"),s.insertAdjacentHTML("beforeend",'\n  <span class="material-icons nsw-material-icons" focusable="false" aria-hidden="true">keyboard_arrow_down</span>\n  '),i.appendChild(s),i);o.textContent="",o.appendChild(l);var u=o.getElementsByTagName("button")[0];r.id=u.getAttribute("aria-controls"),r.hidden=!0,t.content.push(r),t.buttons.push(u)}))}},{key:"controls",value:function(){var t=this;this.buttons.forEach((function(e){e.addEventListener("click",t.toggleEvent,!1)})),this.expandAllBtn&&this.collapseAllBtn&&(this.expandAllBtn.addEventListener("click",this.expandAllEvent,!1),this.collapseAllBtn.addEventListener("click",this.collapseAllEvent,!1))}},{key:"getTargetContent",value:function(t){var e=this.buttons.indexOf(t);return this.content[e]}},{key:"setAccordionState",value:function(t,e){var n=this.getTargetContent(t);"open"===e?(t.classList.add("active"),t.setAttribute("aria-expanded","true"),n.hidden=!1):"close"===e&&(t.classList.remove("active"),t.setAttribute("aria-expanded","false"),n.hidden=!0)}},{key:"toggle",value:function(t){var e=t.currentTarget;this.getTargetContent(e).hidden?this.setAccordionState(e,"open"):this.setAccordionState(e,"close"),this.expandAllBtn&&this.collapseAllBtn&&(this.expandAllBtn.disabled=this.content.every((function(t){return!1===t.hidden})),this.collapseAllBtn.disabled=this.content.every((function(t){return!0===t.hidden})))}},{key:"expandAll",value:function(){var t=this;this.buttons.forEach((function(e){t.setAccordionState(e,"open")})),this.expandAllBtn.disabled=!0,this.collapseAllBtn.disabled=!1}},{key:"collapseAll",value:function(){var t=this;this.buttons.forEach((function(e){t.setAccordionState(e,"close")})),this.expandAllBtn.disabled=!1,this.collapseAllBtn.disabled=!0}}]),t}(),v=function(){function t(n){var i=this;e(this,t),this.filters=n,this.openButton=n.querySelector(".nsw-filters__controls button"),this.closeButtons=n.querySelectorAll(".nsw-filters__back button"),this.all=n.querySelectorAll(".nsw-filters__all"),this.allBlocks=Array.prototype.slice.call(this.all),this.showMoreButtons=Array.prototype.slice.call(n.querySelectorAll(".nsw-filters__more")),this.showEvent=function(t){return i.showFilters(t)},this.hideEvent=function(t){return i.hideFilters(t)},this.showMoreEvent=function(t){return i.showMore(t)},this.body=document.body}return i(t,[{key:"init",value:function(){this.controls()}},{key:"controls",value:function(){var t=this;this.openButton.addEventListener("click",this.showEvent,!1),this.closeButtons.forEach((function(e){e.addEventListener("click",t.hideEvent,!1)})),this.all.forEach((function(e){e.nextElementSibling.addEventListener("click",t.showMoreEvent,!1)}))}},{key:"showFilters",value:function(t){t.preventDefault(),this.filters.classList.add("active"),this.body.classList.add("filters-open")}},{key:"hideFilters",value:function(t){t.preventDefault(),this.filters.classList.remove("active"),this.body.classList.remove("filters-open")}},{key:"showMore",value:function(t){t.preventDefault();var e=t.target,n=this.showMoreButtons.indexOf(e);this.allBlocks[n].classList.remove("hidden"),e.classList.add("hidden")}}]),t}(),d=function(){function t(n,i){var s=this;e(this,t),this.tablistClass=".nsw-tabs__list",this.tablistItemClass="li",this.tablistLinkClass="a",this.tab=n,this.showTab=i,this.tabList=n.querySelector(this.tablistClass),this.tabItems=this.tabList.querySelectorAll(this.tablistItemClass),this.allowedKeys=[35,36,37,39,40],this.tabLinks=[],this.tabPanel=[],this.selectedTab=null,this.clickTabEvent=function(t){return s.clickTab(t)},this.arrowKeysEvent=function(t){return s.arrowKeys(t)}}return i(t,[{key:"init",value:function(){this.setUpDom(),this.controls(),this.setInitalTab()}},{key:"setUpDom",value:function(){var t=this,e=document.createElement("div");e.classList.add("nsw-tabs__list-wrapper"),this.tab.prepend(e),e.prepend(this.tabList),this.tabList.setAttribute("role","tablist"),this.tabItems.forEach((function(e){var n=e,i=e.querySelector(t.tablistLinkClass),s=t.tab.querySelector(i.hash),a=c("tab");n.setAttribute("role","presentation"),t.enhanceTabLink(i,a),t.enhanceTabPanel(s,a)}))}},{key:"enhanceTabLink",value:function(t,e){t.setAttribute("role","tab"),t.setAttribute("id",e),t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this.tabLinks.push(t)}},{key:"enhanceTabPanel",value:function(t,e){var n=t;n.setAttribute("role","tabpanel"),n.setAttribute("role","tabpanel"),n.setAttribute("aria-labelledBy",e),n.setAttribute("tabindex","0"),n.hidden=!0,this.tabPanel.push(n)}},{key:"setInitalTab",value:function(){var t=this.tabLinks,e=this.tabPanel,n=this.showTab,i=void 0===n?0:n,s=t[i];s.classList.add("active"),s.removeAttribute("tabindex"),s.setAttribute("aria-selected",!0),e[i].hidden=!1,this.selectedTab=s}},{key:"clickTab",value:function(t){t.preventDefault(),this.switchTabs(t.currentTarget)}},{key:"switchTabs",value:function(t){var e=t;if(e!==this.selectedTab){e.focus(),e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),e.classList.add("active"),this.selectedTab.setAttribute("aria-selected",!1),this.selectedTab.setAttribute("tabindex","-1"),this.selectedTab.classList.remove("active");var n=this.tabLinks.indexOf(e),i=this.tabLinks.indexOf(this.selectedTab);this.tabPanel[n].hidden=!1,this.tabPanel[i].hidden=!0,this.selectedTab=e,e.classList.contains("js-tabs-fixed")||this.selectedTab.scrollIntoView()}}},{key:"arrowKeys",value:function(t){var e=t.which,n=this.tabLinks.length-1,i=this.tabLinks.indexOf(this.selectedTab),s=!1;if(this.allowedKeys.includes(e)){switch(e){case 35:i=n;break;case 36:i=0;break;case 37:i=0===i?-1:i-=1;break;case 39:i=i===n?-1:i+=1;break;case 40:s=!0}i>-1&&(s?this.tabPanel[i].focus():this.switchTabs(this.tabLinks[i]))}}},{key:"controls",value:function(){var t=this;this.tabLinks.forEach((function(e){e.addEventListener("click",t.clickTabEvent,!1),e.addEventListener("keydown",t.arrowKeysEvent,!1)}))}}]),t}(),b=function(){function t(n){var i=this;e(this,t),this.messageElement=n,this.closeButton=n.querySelector(".js-close-alert"),this.closeMessageEvent=function(t){return i.closeMessage(t)}}return i(t,[{key:"init",value:function(){this.controls()}},{key:"controls",value:function(){this.closeButton.addEventListener("click",this.closeMessageEvent,!1)}},{key:"closeMessage",value:function(){this.messageElement.hidden=!0}}]),t}();window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(this))return null;do{if(e.matches(t))return e;e=e.parentElement}while(null!==e);return null}),t.Accordion=h,t.GlobalAlert=b,t.Navigation=u,t.SiteSearch=o,t.Tabs=d,t.initSite=function(){var t=document.querySelectorAll(".js-open-search"),e=document.querySelectorAll(".js-close-search"),n=document.querySelectorAll(".js-accordion"),i=document.querySelectorAll(".js-filters"),s=document.querySelectorAll(".js-tabs"),a=document.querySelectorAll(".js-global-alert");t.forEach((function(t){new o(t).init()})),e.forEach((function(t){new o(t).init()})),(new u).init(),n.forEach((function(t){new h(t).init()})),i&&i.forEach((function(t){new v(t).init()})),s&&s.forEach((function(t){new d(t).init()})),a&&a.forEach((function(t){new b(t).init()}))},Object.defineProperty(t,"__esModule",{value:!0})}({});